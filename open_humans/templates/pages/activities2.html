{% extends 'base.html' %}

{% load static from staticfiles %}
{% load utilities %}

{% block head_title %}Activities{% endblock %}

{% block extra_js %}
<script src="https://npmcdn.com/masonry-layout@4.0/dist/masonry.pkgd.min.js"></script>
{% endblock %}

{% block main %}
<div class="masonry-container" style="margin-top:15px;">
  {% for activity_label, activity in activities.items %}
  <div class="col-lg-4 col-sm-6 item">
    <div class="panel panel-default"><div class="panel-body"{% if activity.is_connected %} style="background:#EEF8F8;color:#777;"{% endif %}>
      <div class="row">
        <div class="col-sm-4">
          <img class="img-responsive" src="{% static activity.badge_path %}" alt="" style="margin-bottom:15px;">
          {% if not activity.active %}
          <span class="label label-default" style="display: inline-block;">Inactive</span>
          {% endif %}
          {% if activity.in_development %}
          <span class="label label-default" style="display: inline-block;">In development</span>
          {% endif %}
          {% if 'data_source' in activity.labels %}
          <span class="label label-warning" style="display: inline-block;">Data source</span>
          {% endif %}
          {% if 'study' in activity.labels %}
          <span class="label label-primary" style="display: inline-block;">Study</span>
          {% endif %}
          {% if 'academic_or_nonprofit' in activity.labels %}
          <span class="small">
            <span class="label label-info" style="display: inline-block;">Academic/Nonprofit</span>
          </span>
          {% if 'share_data' in activity.labels %}
          <span class="label label-success" style="display: inline-block;">Share data</span>
          {% endif %}
          {% endif %}
        </div>
        <div class="col-sm-8">
          <div style="margin-bottom:10px;">
            <span class="h4">{{ activity.verbose_name }}</span>
          </div>
          {% if activity.leader %}
          <div style="margin-bottom:10px;">
            {{ activity.leader}}
          </div>
          {% endif %}
          {% if activity.inst_or_org %}
          <div style="margin-bottom:10px;">
            {{ activity.inst_or_org }}
          </div>
          {% endif %}
          <p>
            {{ activity.description }}
          </p>
        </div>
      </div>
      <hr>
      <center>
        {% url 'activities2' as activities_next %}
        {% if 'data_source' in activity.labels %}
          {% if activity.is_connected %}
            <b>Data source connected!</b><br>
            <span class="small">
            Manage data on <a href={% url 'my-member-research-data' %}>your research data page</a>
            </span>
          {% else %}
            {% if activity.info_url %}
            <a href="{{ activity.info_url }}" class="btn btn-xs btn-default">Visit the website</a>
            {% endif %}
            {# MPB 2016/04: I'd like it if the included partial could have btn-default style, not btn-primary. #}
            {% if activity.add_data_text and activity.add_data_url %}
              {% with text=activity.add_data_text href=activity.add_data_url class='btn-xs' next=activities_next %}
                {% include 'partials/import-button.html' %}
              {% endwith %}
            {% endif %}
          {% endif %}
        {% elif 'share_data' in activity.labels %}
          {% if activity.is_connected %}
            <b>Project joined!</b>
          {% else %}
            {% with text="Join project" href=activity.join_url class='btn-xs' next=activities_next %}
              {% include 'partials/import-button.html' %}
            {% endwith %}
          {% endif %}
        {% endif %}
      </center>
    </div></div>
  </div>
  {% endfor %}

</div>

{% endblock %}
