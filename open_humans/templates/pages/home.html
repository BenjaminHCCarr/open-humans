{% extends 'base.html' %}

{% load static from staticfiles %}
{% load utilities %}

{% block head_title %}Home{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.0/imagesloaded.pkgd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.2.2/isotope.pkgd.min.js"></script>
{% endblock %}

{% block body_main %}

<div class="container home-title-pic-div">
  <div class="row">
    <div class="col-sm-7 home-title-div">
      <div style="text-align:center;">
        <h1>Open Humans</h1>
        <h4 class="subtitle">
          Participate&nbsp;in&nbsp;research. Share&nbsp;your&nbsp;data. Learn&nbsp;more&nbsp;together.
        </h4>
        <a href="{% url 'about' %}" class="btn btn-default" style="margin-top:15px;">Learn more</a>
      </div>
    </div>
    <div class="col-sm-5 home-pic-div">
      <img class="home-pic hidden-xs" src="{% static 'images/your-data-plus-you-sketch.jpg' %}">
      <img class="home-pic visible-xs-block" src="{% static 'images/your-data-plus-you-sketch.jpg' %}">
    </div>
  </div>
</div>

<div class="container">
  <hr>
  <h3 class="text-center">Recent news</h3>
  <div class="row">
    {% for post in recent_blogposts %}
    <div class="col-xs-4">
      <div class="panel panel-default">
        <div class="panel-body">
          <h5>{{ post.title }}</h5>
          {% if post.image %}
          <img class="img-responsive img-thumbnail" src="{{ post.image.url }}" style="max-width: 50%;float:right;">
          {% endif %}
          <p><small>
            {{ post.summary|safe }}
          </small></p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div class="container">
  <hr>
  <h3 class="text-center">Recent activity</h3>
  <div class="row">
    <div class="col-xs-12">
      {% for event in recent_activity reversed %}
      <p>
        {% if event.action == 'created-account' %}
        <span class="muted">{{ event.timestamp }} GMT:</span> New member! <b><a href="{% url 'member-detail-direct' event.member.user.username %}">{{ event.member.user.username }}</a></b> created an account.
        {% elif event.action == 'joined-project' %}
        {{ event.timestamp }} GMT: <b><a href="{% url 'member-detail-direct' event.member.user.username %}">{{ event.member.user.username }}</a></b> joined <b><a href="{% url 'activity-management' event.project.slug %}">{{ event.project.name }}</a></b>.
        {% elif event.action == 'joined-project' %}
        {{ event.timestamp }} GMT: <b><a href="{% url 'member-detail-direct' event.member.user.username %}">{{ event.member.user.username }}</a></b> publicly shared data from <b><a href="{% url 'activity-management' event.project.slug %}">{{ event.project.name }}</a></b>.
        {% endif %}
      </p>
      {% endfor %}
    </div>
  </div>
</div>

<div class="container">
  <hr>
  <h3 class="text-center">Featured projects</h3>
  <div class="grid row">
  {% for activity in highlighted_projects %}
  {% include 'partials/activity-panel.html' %}
  {% endfor %}
  </div>
</div>
{% endblock %}
